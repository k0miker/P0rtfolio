---
import "../css/fontawesome/css/fontawesome.css";
import "../css/fontawesome/css/all.min.css";
import CV from "../assets/doc/ColinBlome-WebDev-CV.pdf";
import skillsBg from "../assets/images/skills.jpg";
---

<!-- Optimierter Hintergrund für mobile Geräte -->
<div class="flex flex-col box justify-center items-center min-h-[100vh]" id="skills">
  <div class="card offscreen">
    <div
      class="header font-[mono] text-[1.5rem] hover:tracking-[1vw]  hover:text-[tomato] text-[var(--text-primary)] duration-500 "
    >
      My Skills<span class="animate-ping">_</span>
    </div>
    <div class="body">
      <div class="skill">
        <div class="skill-name html font-[mono]">HTML</div>
        <div class="skill-level">
          <div style="width: 69%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name css font-[mono]">CSS</div>
        <div class="skill-level">
          <div style="width: 62%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name js font-[mono]">JavaScript</div>
        <div class="skill-level">
          <div style="width: 50%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name ts font-[mono]">TypeScript</div>
        <div class="skill-level">
          <div style="width: 20%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name astro font-[mono]">Astro</div>
        <div class="skill-level">
          <div style="width: 43%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name React font-[mono]">ReactNative</div>
        <div class="skill-level">
          <div style="width: 45%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name tailwind font-[mono]">Tailwind</div>
        <div class="skill-level">
          <div style="width: 35%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name github font-[mono]">Github</div>
        <div class="skill-level">
          <div style="width: 55%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name scss font-[mono]">SCSS</div>
        <div class="skill-level">
          <div style="width: 20%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name windows font-[mono]">Windows</div>
        <div class="skill-level">
          <div style="width: 80%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name linux font-[mono]">Linux</div>
        <div class="skill-level">
          <div style="width: 60%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name tailwind font-[mono]">Express</div>
        <div class="skill-level">
          <div style="width: 30%" class="skill-percent"></div>
        </div>
      </div>
      <div class="skill">
        <div class="skill-name tailwind font-[mono]">NoSQL</div>
        <div class="skill-level">
          <div style="width: 45%" class="skill-percent"></div>
        </div>
      </div>
      <div class="flex wrapper mt-10">
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-html5"></i>
          <span class="icon-label">HTML5</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-css3"></i>
          <span class="icon-label">CSS3</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-react"></i>
          <span class="icon-label">React</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-js"></i>
          <span class="icon-label">JavaScript</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-sass"></i>
          <span class="icon-label">Sass</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-linux"></i>
          <span class="icon-label">Linux</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-windows"></i>
          <span class="icon-label">Windows</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-github"></i>
          <span class="icon-label">Github</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-node"></i>
          <span class="icon-label">Node.js</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-solid text-gray-600 fa-database"></i>
          <span class="icon-label">Database</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-solid text-gray-600 fa-server"></i>
          <span class="icon-label">Server</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-figma"></i>
          <span class="icon-label">Figma</span>
        </div>
        <div class="icon-wrapper">
          <i class="fa-brands text-gray-600 fa-android"></i>
          <span class="icon-label">Android</span>
        </div>
      </div>
    </div>
  </div>
  <a
    href={CV}
    target="_blank"
    class="mt-[10vh] p-3 cv rounded-lg font-bold offscreen animate-cv text-lg"
    >/Download CV</a
  >
</div>

<style define:vars={{ skillsBgUrl: `url(${skillsBg.src})` }}>
  /* Optimierte Bilddarstellung */
  .box {
    padding: 5vw;
    background-image: var(--skillsBgUrl); /* Dieses Hintergrundbild wird animiert */
    background-size: cover;
    background-attachment: fixed;
    transition: animation-play-state 0.3s;
  }
  
  /* Selektor für die Animation des #skills Elements */
  #skills.animate {
    animation: slidein linear 50s infinite alternate;
  }

  .wrapper {
    justify-content: space-between;
    flex-wrap: wrap;
  }
  i {
    font-size: 30px;
    padding: 10px;
  }
  i:hover {
    transform: scale(1.2);
    transition: 0.5s;
  }
  .card {
    display: flex;
    flex-direction: column;
    max-width: 768px;
    width: 90%;
    height: fit-content;
    background: var(--card-highlight);
    box-shadow: var(--card-shadow), var(--card-border-glow);
    border-radius: 10px;
    overflow: hidden;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    transition: box-shadow 0.4s ease, transform 0.4s ease;
    will-change: transform, box-shadow;
  }
  
  .card:hover {
    transform:  scale(1.01);
    box-shadow: var(--card-shadow), 0 15px 30px rgba(0, 0, 0, 0.2), var(--card-border-glow);
    transition: box-shadow 0.4s cubic-bezier(0.23, 1, 0.32, 1), transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .header {
    background-color: var(--bg-secondary);
    color: #fff;
    padding: 20px;
    text-align: center;
  }

  .body {
    padding: 20px;
    background-color: var(--bg-card);
  }

  .skill {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px 8px;
    border-radius: 6px;
    transition: all 0.3s ease;
  }

  .skill:hover {
    background-color: var(--bg-tertiary);
    transform: translateX(5px);
    box-shadow: -3px 0 0px var(--accent);
  }

  .skill-name {
    width: 120px;
    transition: 0.3s;
    font-size: 16px;
    color: var(--text-primary);
  }

  .skill-level {
    flex-grow: 1;
    height: 10px;
    background-color: var(--bg-tertiary);
    box-shadow: 0 0 1px 1px var(--shadow);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    z-index: 0;
    display: flex;
  }

  .skill-percent {
    position: absolute;
    z-index: 0;
    border-radius: 5px;
    height: 100%;
    background-color: var(--bg-secondary);
    opacity: 0; /* Bleibt initial 0, wird durch .animate oder Low-Perf-Regel auf 1 gesetzt */
    transition: opacity 0.5s ease; /* Für Fade-In im High-Performance-Modus */
    background-image: linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.55) 25%,
      transparent 25%,
      transparent 50%,
      rgba(255, 255, 255, 0.55) 50%,
      rgba(255, 255, 255, 0.55) 65%,
      transparent 65%,
      transparent
    );
    background-size: 20px 20px;
  }

  .animate .skill-percent {
    opacity: 1;
    animation: skill-stripe 2s linear infinite;
    transform: translateZ(0); /* GPU acceleration */
  }

  @keyframes skill-stripe {
    0% { background-position: 0 0; }
    100% { background-position: 20px 0; }
  }

  .animate .skill:nth-of-type(1) .skill-percent {
    animation: skill-stripe 2s linear infinite, html-color 14s infinite alternate;
  }
  .animate .skill:nth-of-type(2) .skill-percent {
    animation: skill-stripe 2s linear infinite, css-color 14s infinite alternate;
    animation-delay: .1s;
  }
  .animate .skill:nth-of-type(3) .skill-percent {
    animation: skill-stripe 2s linear infinite, js-color 14s infinite alternate;
    animation-delay: .2s;
  }
  .animate .skill:nth-of-type(4) .skill-percent {
    animation: skill-stripe 2s linear infinite, ts-color 14s infinite alternate;
    animation-delay: .3s;
  }
  .animate .skill:nth-of-type(5) .skill-percent {
    animation: skill-stripe 2s linear infinite, astro-color 14s infinite alternate;
    animation-delay: .4s;
  }
  .animate .skill:nth-of-type(6) .skill-percent {
    animation: skill-stripe 2s linear infinite, react-color 14s infinite alternate;
    animation-delay: .5s;
  }
  .animate .skill:nth-of-type(7) .skill-percent {
    animation: skill-stripe 2s linear infinite, tailwind-color 14s infinite alternate;
    animation-delay: .7s;
  }
  .animate .skill:nth-of-type(8) .skill-percent {
    animation: skill-stripe 2s linear infinite, github-color 14s infinite alternate;
    animation-delay: .8s;
  }
  .animate .skill:nth-of-type(9) .skill-percent {
    animation: skill-stripe 2s linear infinite, scss-color 14s infinite alternate;
    animation-delay: .9s;
  }
  .animate .skill:nth-of-type(10) .skill-percent {
    animation: skill-stripe 2s linear infinite, windows-color 14s infinite alternate;
    animation-delay: 1.0s;
  }
  .animate .skill:nth-of-type(11) .skill-percent {
    animation: skill-stripe 2s linear infinite, linux-color 14s infinite alternate;
    animation-delay: 1.1s;
  }
  .animate .skill:nth-of-type(12) .skill-percent {
    animation: skill-stripe 2s linear infinite, express-color 14s infinite alternate;
    animation-delay: 1.2s;
  }
  .animate .skill:nth-of-type(13) .skill-percent {
    animation: skill-stripe 2s linear infinite, nosql-color 14s infinite alternate;
    animation-delay: 1.3s;
  }

  @keyframes html-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgb(0, 0, 147); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes css-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(128, 0, 128, 0.976); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes js-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(255, 99, 71, 0.97); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes ts-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(94, 171, 230, 0.936); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes astro-color {
   0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(217, 96, 136, 0.908); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes react-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: #58C4DC; }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes tailwind-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: #36B7F0; }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes github-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(0, 145, 12, 0.93); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes scss-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(128, 0, 128, 0.904); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes windows-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(0, 149, 255, 0.922); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes linux-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(128, 0, 128, 0.932); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes express-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(201, 201, 0, 0.921); }
    20% { background-color: var(--bg-secondary); }
  }
  
  @keyframes nosql-color {
    0% { background-color: var(--bg-secondary); }
    10% { background-color: rgba(0, 161, 201, 0.964); }
    20% { background-color: var(--bg-secondary); }
  }

  .skill:hover .skill-percent {
    animation-duration: 0.8s, 2s !important;
    background-image: linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.3) 25%,
      transparent 25%,
      transparent 50%,
      rgba(255, 255, 255, 0.3) 50%,
      rgba(255, 255, 255, 0.3) 75%,
      transparent 75%,
      transparent
    );
    animation-delay: 0s, 0s !important;
    animation-fill-mode: forwards !important;
    animation-play-state: running !important;
  }

  /* Spezifische Hover-Effekte für jeden Skill */
  .skill:nth-of-type(1):hover {
    box-shadow: -3px 0 0px rgba(0, 0, 147, 0.982);
    background-color: rgba(0, 0, 147, 0.1);
  }
  .skill:nth-of-type(1):hover .skill-name {
    color: rgba(65, 65, 255, 0.982);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(0, 0, 147, 0.3);
  }
  .skill:nth-of-type(1):hover .skill-percent {
    background-color: rgb(0, 0, 147) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(2):hover {
    box-shadow: -3px 0 0px rgba(128, 0, 128, 0.976);
    background-color: rgba(128, 0, 128, 0.337);
  }
  .skill:nth-of-type(2):hover .skill-name {
    color: rgba(128, 0, 128, 0.976);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(128, 0, 128, 0.3);
  }
  .skill:nth-of-type(2):hover .skill-percent {
    background-color: rgba(128, 0, 128, 0.976) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(3):hover {
    box-shadow: -3px 0 0px tomato;
    background-color: rgba(255, 99, 71, 0.1);
  }
  .skill:nth-of-type(3):hover .skill-name {
    color: tomato;
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(255, 99, 71, 0.3);
  }
  .skill:nth-of-type(3):hover .skill-percent {
    background-color: tomato !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(4):hover {
    box-shadow: -3px 0 0px rgb(94, 171, 230);
    background-color: rgba(94, 171, 230, 0.1);
  }
  .skill:nth-of-type(4):hover .skill-name {
    color: rgb(94, 171, 230);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(94, 171, 230, 0.3);
  }
  .skill:nth-of-type(4):hover .skill-percent {
    background-color: rgb(94, 171, 230) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(5):hover {
    box-shadow: -3px 0 0px palevioletred;
    background-color: rgba(216, 112, 147, 0.1);
  }
  .skill:nth-of-type(5):hover .skill-name {
    color: palevioletred;
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(216, 112, 147, 0.3);
  }
  .skill:nth-of-type(5):hover .skill-percent {
    background-color: palevioletred !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(6):hover {
    box-shadow: -3px 0 0px rgb(0, 159, 180);
    background-color: rgba(0, 159, 180, 0.1);
  }
  .skill:nth-of-type(6):hover .skill-name {
    color: rgb(0, 159, 180);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(0, 159, 180, 0.3);
  }
  .skill:nth-of-type(6):hover .skill-percent {
    background-color: rgb(0, 159, 180) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(7):hover {
    box-shadow: -3px 0 0px rgb(0, 159, 180);
    background-color: rgba(0, 159, 180, 0.1);
  }
  .skill:nth-of-type(7):hover .skill-name {
    color: rgb(0, 159, 180);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(0, 159, 180, 0.3);
  }
  .skill:nth-of-type(7):hover .skill-percent {
    background-color: rgb(0, 159, 180) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(8):hover {
    box-shadow: -3px 0 0px rgb(0, 145, 12);
    background-color: rgba(0, 145, 12, 0.1);
  }
  .skill:nth-of-type(8):hover .skill-name {
    color: rgb(0, 145, 12);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(0, 145, 12, 0.3);
  }
  .skill:nth-of-type(8):hover .skill-percent {
    background-color: rgb(0, 145, 12) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(9):hover {
    box-shadow: -3px 0 0px purple;
    background-color: rgba(128, 0, 128, 0.1);
  }
  .skill:nth-of-type(9):hover .skill-name {
    color: purple;
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(128, 0, 128, 0.3);
  }
  .skill:nth-of-type(9):hover .skill-percent {
    background-color: purple !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(10):hover {
    box-shadow: -3px 0 0px rgb(0, 149, 255);
    background-color: rgba(0, 149, 255, 0.1);
  }
  .skill:nth-of-type(10):hover .skill-name {
    color: rgb(0, 149, 255);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(0, 149, 255, 0.3);
  }
  .skill:nth-of-type(10):hover .skill-percent {
    background-color: rgb(0, 149, 255) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(11):hover {
    box-shadow: -3px 0 0px purple;
    background-color: rgba(128, 0, 128, 0.1);
  }
  .skill:nth-of-type(11):hover .skill-name {
    color: purple;
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(128, 0, 128, 0.3);
  }
  .skill:nth-of-type(11):hover .skill-percent {
    background-color: purple !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(12):hover {
    box-shadow: -3px 0 0px rgb(211, 211, 0);
    background-color: rgba(211, 211, 0, 0.1);
  }
  .skill:nth-of-type(12):hover .skill-name {
    color: rgb(211, 211, 0);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(211, 211, 0, 0.3);
  }
  .skill:nth-of-type(12):hover .skill-percent {
    background-color: rgb(211, 211, 0) !important;
    opacity: 1;
  }
  
  .skill:nth-of-type(13):hover {
    box-shadow: -3px 0 0px rgb(0, 161, 201);
    background-color: rgba(0, 161, 201, 0.1);
  }
  .skill:nth-of-type(13):hover .skill-name {
    color: rgb(0, 161, 201);
    transform: translateX(10px) scale(1.2);
    text-shadow: 0 0 5px rgba(0, 161, 201, 0.3);
  }
  .skill:nth-of-type(13):hover .skill-percent {
    background-color: rgb(0, 161, 201) !important;
    opacity: 1;
  }

  .skill-percent-number {
    margin-left: 20px;
    font-size: 16px;
    color: var(--text-primary);
  }

  i:hover {
    transition: 0.5s;
    color: tomato;
  }

  .icon-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .icon-wrapper i {
    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    font-size: 35px;
    will-change: transform, color;
    backface-visibility: hidden; /* GPU acceleration */
  }
  .icon-label {
    opacity: 0;
    transform: translate(0, -5px) scale(.7);
    transition:  0.5s;
    font-size: 10px;
    margin-top: 5px;
    color: var(--text-primary);
  }
  .icon-wrapper:hover i {
    transform: scale(1.2) translate(0, -5px);
  }

  .icon-wrapper:hover .icon-label {
    color: tomato;
    opacity: 1;
    transform: translate(0, -5px) scale(1.2);
    transition: .5;
  }

  .cv {
    box-shadow: var(--card-shadow);
    transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    position: relative;
    border: 2px solid transparent;
    padding: 0.75rem 1.5rem;
    overflow: hidden;
  }
  
  .cv:hover {
    color: var(--accent);
    transform: scale(1.05);
    animation: border-glow 3s infinite;
  }

  .cv::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.7s;
  }
  
  .cv:hover::before {
    left: 100%;
  }

  @keyframes pulse-shadow {
    0% {
      box-shadow: 0 0 5px transparent;
    }
    50% {
      box-shadow: 0 0 35px var(--accent), inset 0 0 15px 0px var(--bg-secondary);
    }
    100% {
      box-shadow: 0 0 5px transparent;
    }
  }

  @keyframes border-glow {
    0% {
      border-color: transparent;
    }
    50% {
      border-color: var(--accent);
    }
    100% {
      border-color: transparent;
    }
  }

  .animate-cv {
    animation: pulse-shadow 3s infinite;

  }

  /* Medienabfragen für bessere mobile Performance */
  @media (max-width: 768px) {
    .card {
      width: 100%;
    }
    .skill-name {
      font-size: 14px;
    }
    .skill-percent {
      width: 200px;
      transition: none; /* Entferne Übergänge auf mobilen Geräten */
    }
    .skill-percent-number {
      font-size: 14px;
    }
    .icon-wrapper i {
      transition: transform 0.3s ease; /* Vereinfachte Transition */
    }
    
    /* Reduzierte Animationen auf mobilen Geräten */
    @supports (content-visibility: auto) {
      .icon-wrapper {
        content-visibility: auto;
        contain-intrinsic-size: 0 40px;
      }
    }
  }

  /* Performance-bezogene Styles */
  :global([data-performance="low"]) .box {
    animation: none !important;
    background-attachment: scroll !important;
  }

  /* NEU: Styles für Skill-Balken im Low-Performance-Modus */
  :global(html[data-performance="low"]) .skill-percent,
  :global(body[data-performance="low"]) .skill-percent {
    opacity: 1 !important; 
    animation: none !important; 
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const skillsSection = document.getElementById("skills");
    const skillPercents = document.querySelectorAll(".skill-percent");
    
    // Import des Performance-Monitors
    import('../utils/performanceMonitor.js').then(({ performanceMonitor }) => {
      performanceMonitor.addListener((isLowPerformance) => {
        if (skillsSection) {
          if (isLowPerformance) {
            skillsSection.classList.remove("animate");
            skillsSection.style.backgroundAttachment = "scroll";
          } else {
            // Bei hoher Performance Animation nur hinzufügen, wenn im Viewport
            if (isElementInViewport(skillsSection)) {
              skillsSection.classList.add("animate");
              skillsSection.style.backgroundAttachment = "fixed";
            }
          }
        }
      });
    });
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        // Prüfen des aktuellen Performance-Modus
        const currentMode = document.documentElement.getAttribute('data-performance') || 'high';
        
        if (entry.isIntersecting && currentMode !== 'low') {
          entry.target.classList.add("animate");
          
          skillPercents.forEach((skillBar, index) => {
            (skillBar as HTMLElement).style.transitionDelay = `${index * 0.1}s`;
          });
        } else {
          entry.target.classList.remove("animate");
        }
      });
    }, { threshold: 0.1 });
    
    if (skillsSection) {
      observer.observe(skillsSection);
    }
    
    // Hilfsfunktion zur Prüfung, ob Element im Viewport ist
    function isElementInViewport(el) {
      const rect = el.getBoundingClientRect();
      return (
        rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.bottom >= 0
      );
    }
  });
</script>
