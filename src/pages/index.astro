---
import "../css/fonts.css";
import "../css/keyframes.css";
import "../css/darkmode.css";
import "../css/fontawesome/css/fontawesome.css";
import "../css/fontawesome/css/all.min.css";
import Nav from "../components/Nav.astro";
import Iam from "../components/Iam.astro";
import Myself from "../components/Myself.astro";
import Projects from "../components/Projects.astro";
import Skills from "../components/Skills.astro";
import Contact from "../components/Contact.astro";
import Footer from "../components/Footer.astro";
import ScrollProgress from "../components/ui/ScrollProgress.astro";
import CookieConsent from "../components/CookieConsent.astro";

// Prüfen, ob Cookie-Consent bereits gesetzt wurde
const hasCookieConsent = false; // Dies wird clientseitig überprüft
---

<html class="w-full" lang="de">
  <head>
    <!-- Sofort ausgeführtes Script für Scroll-Blockierung -->
    <script is:inline>
      // Prüfen, ob bereits eine Cookie-Entscheidung vorliegt
      if (!localStorage.getItem('cookie-consent')) {
        // Klasse hinzufügen, die das Scrollen verhindert
        document.documentElement.classList.add('no-scroll');
      }
    </script>
    
    <!-- CSS für Scroll-Blockierung -->
    <style is:inline>
      html.no-scroll {
        overflow: hidden !important;
        height: 100% !important;
        position: fixed !important;
        width: 100% !important;
      }
      
      html.no-scroll body {
        overflow: hidden !important;
      }
      
      /* Verhindert "Touch-Scrolling" auf Mobilgeräten */
      html.no-scroll * {
        touch-action: none !important;
      }
    </style>
    
    <!-- Google Tag Manager -->
    <script is:inline>
      // TypeScript-sicherer GTM-Code
      (function(w, d, s, l, i) {
        var f, j;
        (w[l] = w[l] || []).push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        f = d.getElementsByTagName(s)[0];
        j = d.createElement(s);
        if (j instanceof HTMLScriptElement) {
          j.async = true;
          j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + (l !== 'dataLayer' ? '&l=' + l : '');
        }
        if (f && f.parentNode) {
          f.parentNode.insertBefore(j, f);
        }
      })(window, document, 'script', 'dataLayer', 'GTM-WFG6LFSX');
    </script>
    <!-- End Google Tag Manager -->
    
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>CB-WebDev | Webentwicklung Fürstenau | Webseite kaufen Bersenbrück</title>
    <meta name="description" content="CB-WebDev - Professionelle Webentwicklung in Fürstenau, Samtgemeinde Bersenbrück. Moderne Webseiten kaufen vom lokalen Webentwickler. Responsive Design, SEO-optimiert. Kostenlose Beratung!" />
    
    <!-- Erweiterte lokale SEO Meta-Tags -->
    <meta name="geo.region" content="DE-NI" />
    <meta name="geo.placename" content="Fürstenau" />
    <meta name="geo.position" content="52.5167;7.6667" />
    <meta name="ICBM" content="52.5167, 7.6667" />
    <meta name="format-detection" content="telephone=yes" />
    <meta name="apple-mobile-web-app-title" content="CB-WebDev" />
    
    <!-- Erweiterte Keywords für lokale Suche -->
    <meta name="keywords" content="CB-WebDev, Webentwicklung Fürstenau, Webseite kaufen Bersenbrück, Homepage erstellen Osnabrück, Webentwickler Samtgemeinde Bersenbrück, responsive Design Landkreis Osnabrück, Online Shop erstellen, SEO Osnabrück, Webdesign Ankum, Homepage Kettenkamp, Webseite Eggermühlen, Webentwickler in meiner Nähe, Webdesign in der Nähe, lokaler Webentwickler, Website erstellen vor Ort" />
    
    <!-- Google My Business Integration -->
    <link rel="me" href="https://www.google.com/maps/place/Fürstenau" />
    <link rel="publisher" href="https://g.page/cb-webdev" />
    
    <!-- Lokale Business Schema erweitert -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "CB-WebDev - Webentwicklung Fürstenau",
      "alternateName": "Colin Blome - CB-WebDev",
      "description": "Lokaler Webentwickler in Fürstenau. Professionelle Webseiten, Online-Shops und SEO-Optimierung für Unternehmen in der Samtgemeinde Bersenbrück und dem Landkreis Osnabrück. Persönliche Betreuung vor Ort.",
      "url": "https://colinblome.dev",
      "image": "https://i.imgur.com/ELVyRRc.jpeg",
      "email": "info@colinblome.dev",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Fürstenau",
        "addressRegion": "Niedersachsen",
        "addressCountry": "DE",
        "postalCode": "49584"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "52.5167",
        "longitude": "7.6667"
      },
      "areaServed": [
        {
          "@type": "City",
          "name": "Fürstenau"
        },
        {
          "@type": "City", 
          "name": "Bersenbrück"
        },
        {
          "@type": "City",
          "name": "Ankum"
        },
        {
          "@type": "City",
          "name": "Kettenkamp"
        },
        {
          "@type": "City",
          "name": "Eggermühlen"
        },
        {
          "@type": "AdministrativeArea",
          "name": "Samtgemeinde Bersenbrück"
        },
        {
          "@type": "AdministrativeArea",
          "name": "Landkreis Osnabrück"
        }
      ],
      "serviceType": [
        "Webentwicklung",
        "Webdesign", 
        "Online Shop Erstellung",
        "Responsive Design",
        "SEO Optimierung",
        "Homepage Erstellung",
        "Website Wartung",
        "E-Commerce Entwicklung"
      ],
      "priceRange": "€€",
      "openingHours": "Mo-Fr 16:00-21:00", 
      "paymentAccepted": "Cash, Credit Card, Bank Transfer",
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Webentwicklung Services Fürstenau",
        "itemListElement": [
          {
            "@type": "Offer",
            "name": "Visitenkarten Webseite erstellen",
            "description": "Individuelle Website",
            "price": "ab 199",
            "priceCurrency": "EUR",
            "areaServed": "Fürstenau, Bersenbrück, Landkreis Osnabrück"
          },
          {
            "@type": "Offer",
            "name": "Webseite kaufen - Basis Paket",
            "description": "Professionelle Business-Website mit bis zu 5 Seiten, responsive Design und Basis-SEO",
            "price": "ab 899",
            "priceCurrency": "EUR",
            "areaServed": "Fürstenau, Bersenbrück, Landkreis Osnabrück"
          },
          {
            "@type": "Offer", 
            "name": "Online Shop erstellen",
            "description": "Vollständiger E-Commerce Shop mit Warenwirtschaft und Zahlungsabwicklung",
            "price": "ab 1499",
            "priceCurrency": "EUR",
            "areaServed": "Fürstenau, Bersenbrück, Landkreis Osnabrück"
          },
          {
            "@type": "Offer",
            "name": "SEO Optimierung", 
            "description": "Suchmaschinenoptimierung für bessere lokale Sichtbarkeit",
            "price": "ab 299",
            "priceCurrency": "EUR",
            "areaServed": "Fürstenau, Bersenbrück, Landkreis Osnabrück"
          }
        ]
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0", 
        "reviewCount": "1"  
      },    
  
      "sameAs": [
        "https://github.com/colinblome",
        "https://linkedin.com/in/colinblome",
        "https://g.page/cb-webdev"
      ],
      "keywords": [
        "Webentwickler in meiner Nähe",
        "Webdesign vor Ort",
        "lokaler Webentwickler Fürstenau",
        "Website erstellen Nähe Osnabrück",
        "Webentwicklung regional"
      ],
      "hasMap": "https://www.google.com/maps/place/Fürstenau/@52.5167,7.6667,15z",
      "isAccessibleForFree": false,
      "maximumAttendeeCapacity": 1,
      "offers": [
        {
          "@type": "Offer",
          "name": "Kostenlose Erstberatung vor Ort",
          "description": "Unverbindliche Beratung in Ihrem Unternehmen in Fürstenau, Bersenbrück oder Umgebung",
          "price": "0",
          "priceCurrency": "EUR",
          "availability": "https://schema.org/InStock"
        }
      ]
    }
    </script>
    
    <!-- FAQ Schema für lokale Suchen -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Was kostet eine Webseite bei CB-WebDev in Fürstenau?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Webseiten ab 899€ - individuelle Beratung für Unternehmen in Fürstenau, Bersenbrück und Landkreis Osnabrück."
          }
        },
        {
          "@type": "Question", 
          "name": "Webentwicklung Samtgemeinde Bersenbrück - wie lange dauert es?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Professionelle Webseiten werden in 2-4 Wochen realisiert. Schnelle Umsetzung für lokale Unternehmen."
          }
        },
        {
          "@type": "Question",
          "name": "Online Shop erstellen - welche Funktionen?",
          "acceptedAnswer": {
            "@type": "Answer", 
            "text": "Vollständige E-Commerce Lösungen mit Warenwirtschaft, Zahlungsabwicklung und mobilem Design für lokale Geschäfte."
          }
        }
      ]
    }
    </script>
    
    <!-- Blog Schema für lokale SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "CB-WebDev Blog Fürstenau",
      "description": "Blog eines freiberuflichen Webentwicklers aus Fürstenau über lokale Webentwicklung",
      "url": "https://colinblome.dev/#blog",
      "author": {
        "@type": "Person",
        "name": "Colin Blome",
        "jobTitle": "Inhaber CB-WebDev"
      },
      "blogPost": [
        {
          "@type": "BlogPosting",
          "headline": "Webentwicklung als Nebengewerbe in Fürstenau",
          "description": "Warum freiberufliche Webentwicklung für lokale Unternehmen die beste Wahl ist",
          "author": {
            "@type": "Person",
            "name": "Colin Blome"
          },
          "datePublished": "2024-01-15",
          "keywords": ["Webentwicklung Nebengewerbe", "Freelancer Fürstenau", "lokale Webentwicklung"]
        },
        {
          "@type": "BlogPosting",
          "headline": "Lokale SEO für Unternehmen in der Region Osnabrück",
          "description": "Praktische SEO-Tipps für kleine Unternehmen in Fürstenau und Umgebung",
          "author": {
            "@type": "Person",
            "name": "Colin Blome"
          },
          "datePublished": "2024-01-10",
          "keywords": ["SEO Osnabrück", "lokale Sichtbarkeit", "Google My Business"]
        }
      ]
    }
    </script>
  </head>
  <body class="w-full flex-col items-center content-center fadein2 custom-scrollbar">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WFG6LFSX" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- SEO-optimierte versteckte Überschrift für Suchmaschinen -->
    <h1 class="seo-hidden">CB-WebDev | Webentwicklung Fürstenau | Webseite kaufen Samtgemeinde Bersenbrück</h1>
    
    <div id="home"></div>
    <Nav />
    <ScrollProgress /> 

    <Iam />

    <div id="about">
      <Myself />
    </div>
    
    <Skills />
    
    <div id="projects" >
      <Projects />
    </div>
    <div id="contact">
      <Contact />
    </div>

    <Footer />

    <button
      id="darkModeToggle"
      class="theme-toggle fixed z-50 p-3 rounded-full shadow-lg focus:outline-none"
      aria-label="Theme wechseln"
    >
    </button>
    
    <button
      id="performanceToggle"
      class="performance-toggle fixed z-50 p-3 rounded-full shadow-lg focus:outline-none"
      aria-label="Performance-Modus wechseln"
      title="Performance-Modus wechseln"
    >

    </button>
    
    <!-- Versteckte SEO-Inhalte -->
    <section class="local-seo-content" aria-hidden="true">
      <div class="container">
        <h2>CB-WebDev - Freiberufliche Webentwicklung in Fürstenau</h2>
        <p>Als <strong>freiberuflicher Webentwickler in Fürstenau</strong> bietet CB-WebDev professionelle Webseiten als Nebengewerbe für kleine und mittlere Unternehmen in der <strong>Samtgemeinde Bersenbrück</strong> und dem <strong>Landkreis Osnabrück</strong>. Persönlich, flexibel und zu fairen Preisen.</p>
        
        <h3>Webseite kaufen vom lokalen Freelancer</h3>
        <p><strong>Webentwicklung als Nebengewerbe</strong> bedeutet für Sie: Keine Overhead-Kosten, persönliche Betreuung und flexible Termine. Ihre neue <strong>Homepage</strong> wird professionell erstellt, aber ohne Agentur-Aufschlag.</p>
        
        <h4>Spezialisierung auf lokale KMU</h4>
        <p><strong>Kleine Webseiten für lokale Unternehmen</strong> - vom Handwerksbetrieb bis zur Praxis. Als <strong>lokaler Webentwickler</strong> verstehe ich die Bedürfnisse regionaler Betriebe und biete maßgeschneiderte Lösungen.</p>
        
        <div class="service-areas">
          <h4>Servicegebiet - Persönliche Betreuung vor Ort</h4>
          <ul>
            <li><strong>Fürstenau</strong> - Hauptstandort, persönliche Beratung</li>
            <li><strong>Samtgemeinde Bersenbrück</strong> - Lokale Webentwicklung</li>
            <li><strong>Ankum, Kettenkamp, Eggermühlen</strong> - Regionale Betreuung</li>
            <li><strong>Bersenbrück, Alfhausen, Rieste</strong> - Flexible Termine</li>
          </ul>
        </div>
        
        <h4>Warum freiberufliche Webentwicklung?</h4>
        <p>Persönliche Betreuung, kurze Wege, faire Preise. Als <strong>Freelancer aus Fürstenau</strong> biete ich Ihnen professionelle Webentwicklung ohne Agentur-Overhead - ideal für lokale Unternehmen mit überschaubarem Budget.</p>
        
        <div class="local-directories">
          <h4>Lokale Präsenz aufbauen</h4>
          <ul>
            <li><strong>Gelbe Seiten Fürstenau</strong> - Offizieller Eintrag</li>
            <li><strong>Lokale Online-Verzeichnisse</strong> - Bessere Auffindbarkeit</li>
            <li><strong>Google My Business</strong> - Optimierung geplant</li>
            <li><strong>Regionale Netzwerke</strong> - Aufbau von Kooperationen</li>
          </ul>
        </div>
      </div>
    </section>
    
    <!-- Kompakte lokale FAQ Sektion -->
    <section class="local-seo-content" aria-hidden="true">
      <div class="container">
        <h4>Häufige Fragen - Webentwicklung Region Osnabrück</h4>
        
        <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
          <h5 itemprop="name">Webseite kaufen Fürstenau - Was ist enthalten?</h5>
          <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
            <p itemprop="text">Responsive Design, SEO-Grundausstattung, SSL-Zertifikat, Wartung für lokale Unternehmen in der Samtgemeinde Bersenbrück.</p>
          </div>
        </div>
        
        <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
          <h5 itemprop="name">SEO Osnabrück - Bessere lokale Sichtbarkeit?</h5>
          <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
            <p itemprop="text">Lokale SEO-Optimierung für Unternehmen in Ankum, Kettenkamp, Eggermühlen - Google My Business Integration inklusive.</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Near Me optimierter Content -->
    <section class="local-seo-content" aria-hidden="true">
      <div class="container">
        <h2>Webentwicklung in Ihrer Nähe</h2>
        <p>Suchen Sie einen <strong>Webentwickler in Ihrer Nähe</strong>? Als lokaler Webentwickler in <strong>Fürstenau</strong> biete ich persönliche Beratung und professionelle Webentwicklung direkt vor Ort. Ob in <strong>Bersenbrück</strong>, <strong>Ankum</strong> oder anderen Gemeinden im <strong>Landkreis Osnabrück</strong> - ich komme zu Ihnen.</p>
        
        <h3>Webentwickler in meiner Nähe - Persönliche Betreuung vor Ort</h3>
        <p>Suchen Sie einen <strong>Webentwickler in Ihrer Nähe</strong>? Als lokaler Webentwickler in <strong>Fürstenau</strong> biete ich persönliche Beratung und professionelle Webentwicklung direkt vor Ort. Ob in <strong>Bersenbrück</strong>, <strong>Ankum</strong> oder anderen Gemeinden im <strong>Landkreis Osnabrück</strong> - ich komme zu Ihnen.</p>
        
        <h4>Lokale Webentwicklung - Ihr Partner vor Ort</h4>
        <p><strong>Webdesign in der Nähe</strong> bedeutet kurze Wege, schnelle Kommunikation und direkten Kontakt. Als <strong>lokaler Webentwickler</strong> verstehe ich die regionalen Besonderheiten und kann Ihre Webseite optimal auf Ihre lokale Zielgruppe abstimmen.</p>
        
        <div class="near-me-services">
          <h4>Services in Ihrer Nähe</h4>
          <ul>
            <li><strong>Webentwicklung vor Ort</strong> - Persönliche Beratung in Ihrem Unternehmen</li>
            <li><strong>Website erstellen Nähe Osnabrück</strong> - Professionelle Umsetzung</li>
            <li><strong>Lokaler Support</strong> - Schnelle Hilfe bei Problemen</li>
            <li><strong>Regional angepasste SEO</strong> - Optimierung für lokale Suchen</li>
          </ul>
        </div>    
      </div>
    </section>
    
    <!-- Cookie-Consent-Banner mit Overlay -->
    <CookieConsent />
    
    <!-- Script zum Verhindern des Scrollens während das Cookie-Banner angezeigt wird -->
    <script is:inline>
      document.addEventListener('DOMContentLoaded', () => {
        // Nochmals prüfen, ob Cookie-Consent gesetzt ist
        if (!localStorage.getItem('cookie-consent')) {
          // Verhindere Scrollen durch Wheel-Events
          document.addEventListener('wheel', preventScroll, { passive: false });
          // Verhindere Scrollen durch Tastatur
          document.addEventListener('keydown', preventScrollKeys);
          // Verhindere Scrollen durch Touch-Events
          document.addEventListener('touchmove', preventScroll, { passive: false });
        }
        
        // Event-Listener für Cookie-Entscheidung
        const acceptAllBtn = document.getElementById('accept-all-cookies');
        const saveSettingsBtn = document.getElementById('save-cookie-settings');
        const rejectAllBtn = document.getElementById('reject-all-cookies');
        
        if (acceptAllBtn) acceptAllBtn.addEventListener('click', removeScrollLock);
        if (saveSettingsBtn) saveSettingsBtn.addEventListener('click', removeScrollLock);
        if (rejectAllBtn) rejectAllBtn.addEventListener('click', removeScrollLock);
        
        function removeScrollLock() {
          document.documentElement.classList.remove('no-scroll');
          document.removeEventListener('wheel', preventScroll);
          document.removeEventListener('keydown', preventScrollKeys);
          document.removeEventListener('touchmove', preventScroll);
        }
        
        function preventScroll(e) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
        
        function preventScrollKeys(e) {
          // Pfeiltasten, Bild auf/ab, Pos1/Ende, Leertaste
          const keys = {37: 1, 38: 1, 39: 1, 40: 1, 32: 1, 33: 1, 34: 1, 35: 1, 36: 1};
          if (keys[e.keyCode]) {
            e.preventDefault();
            return false;
          }
        }
      });
    </script>
  </body>
</html>

<style>
  * {
    scroll-behavior: smooth;
    font-family: mono;
    padding: 0;
    margin: 0;
  }
  
  /* Styles nur anwenden, wenn keine Scroll-Blockierung aktiv ist */
  html:not(.no-scroll) body {
    overflow-x: hidden;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
    padding-bottom: 80px; 
  }

  #about {
    position: relative;
    min-height: 100vh;
    z-index: 0; 
  }
  #skills {
    min-height: 100vh;
  }
  #projects {
    position: relative;
    padding: 0px 0;
    background-size: 500%;
    background-repeat: no-repeat; 
    background-attachment: fixed; 
    background-position: center;
    z-index: 0; 
  }
  #contact {
    padding-top: -150px;
  }
  .blurred {
    filter: blur(5px);
  }
  .custom-scrollbar::-webkit-scrollbar {
    width: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: tomato;
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background-color: #00000094;
    border-radius: 5px;
  }
  
  .theme-toggle {
    bottom: 50px;
    right: 20px;
    padding: .9rem;
    width: 55px;
    background-color: var(--bg-secondary);    
    color: var(--accent);
    transition: all 0.3s ease;
  }
  
  .theme-toggle:hover {
    box-shadow: 0 0 10px 2px var(--pulse-shadow-mid);    
    color: var(--accent);
    background-color: var(--bg-secondary);
  }
  .theme-toggle:hover i {
    transform: scale(1.5);
    transition: .5s;
  }
  
  .theme-toggle i {
    font-size: 1.5rem;
  }  
 .performance-toggle {
    bottom: 50px;
    left: 20px;
    padding: .9rem;
    width: 55px;
    background-color: var(--bg-secondary);
    color: var(--accent);
    transition: all 0.3s ease;
  }
  @media (max-width: 768px) {
    .theme-toggle {
      bottom: 55px;
      right: 15px;
      padding: 0.75rem;
    }
    
    .theme-toggle i {
      font-size: 1.2rem;
    }
    .performance-toggle {
      bottom: 55px;
      left: 15px;
      padding: 0.75rem;
    }
      .performance-toggle i {
      font-size: 1.2rem;
    }
    
  }
  
  

  .performance-toggle i {
    font-size: 1.5rem;
    color: var(--accent);
    transition: transform 0.5s ease;
  }
  
  .performance-toggle:hover {
    box-shadow: 0 0 10px 2px var(--pulse-shadow-mid);
  }
  
  .performance-toggle:hover i {
    transform: scale(1.5);
  }
  
  
  
  .seo-hidden {
    position: absolute;
    left: -9999px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }
  
  .local-seo-content {
    position: absolute;
    left: -9999px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }
</style>

<script>
  // Dark Mode Logic
  document.addEventListener("DOMContentLoaded", () => {
    const darkModeToggle = document.getElementById("darkModeToggle");
    
    // Wenn Element nicht gefunden wird, frühzeitig beenden
    if (!darkModeToggle) {
      console.error("Dark Mode Toggle nicht gefunden");
      return;
    }
    
    const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
    
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark" || (!savedTheme && prefersDarkScheme.matches)) {
      document.documentElement.classList.add("dark-mode"); 
      updateIcon(true);
    } else {
      document.documentElement.classList.remove("dark-mode");
      updateIcon(false);
    }
    
    darkModeToggle.addEventListener("click", () => {
      const isDarkMode = document.documentElement.classList.toggle("dark-mode"); 
      localStorage.setItem("theme", isDarkMode ? "dark" : "light");
      updateIcon(isDarkMode);
    });
    
    function updateIcon(isDarkMode: boolean): void {
      if (!darkModeToggle) return;
      
      darkModeToggle.innerHTML = '';
      const icon = document.createElement('i');
      if (isDarkMode) {
        icon.className = 'fa-solid fa-sun';
        icon.setAttribute('title', 'Light Mode aktivieren');
      } else {
        icon.className = 'fa-solid fa-moon';
        icon.setAttribute('title', 'Dark Mode aktivieren');
      }
      darkModeToggle.appendChild(icon);
    }
  });
  
  document.addEventListener("DOMContentLoaded", () => {
    const sections = document.querySelectorAll("div[id]");
    const navLinks = document.querySelectorAll("nav a");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            navLinks.forEach((link) => {
              if (link.getAttribute("href") === "#" + entry.target.id) {
                link.classList.add("active");
              } else {
                link.classList.remove("active");
              }
            });
          }
        });
      },
      {
        threshold: 0.1, 
        rootMargin: "0px 0px -60% 0px", 
      }
    );

    sections.forEach((section) => {
      observer.observe(section);
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const boxes = document.querySelectorAll(".offscreen");

    const observerOptions = {
      root: null,
      rootMargin: "0px",
      threshold: 0.2,
    };

    const observerCallback = (entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {
      entries.forEach((entry: IntersectionObserverEntry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("in-view");
        } else {
          entry.target.classList.remove("in-view");
        }
      });
    };

    const observer = new IntersectionObserver(
      observerCallback,
      observerOptions
    );

    boxes.forEach((offscreen) => {
      observer.observe(offscreen);
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const animatedSections = [
      document.getElementById("home-section"),
      document.getElementById("skills"),
      document.getElementById("contact-section"),
      document.getElementById("projects")
    ].filter(section => section !== null);
    
    const observer = new IntersectionObserver((entries: IntersectionObserverEntry[]) => {
      entries.forEach((entry: IntersectionObserverEntry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("animate");
        } else {
          entry.target.classList.remove("animate");
        }
      });
    }, { 
      threshold: 0.1,  
      rootMargin: "100px" 
    });
    
    animatedSections.forEach(section => {
      if (section) observer.observe(section);
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const observerOptions = {
      rootMargin: "50px",
      threshold: 0.1,
    };
    
    const animationObserver = new IntersectionObserver((entries: IntersectionObserverEntry[]) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.classList.contains("in-view")) {
          entry.target.classList.add("in-view");
          if (entry.target.hasAttribute("data-stagger-children")) {
            const children = entry.target.querySelectorAll(".stagger-item");
            children.forEach((child, index) => {
              const isMobile = window.innerWidth < 768;
              const delay = isMobile ? index * 0.05 : index * 0.1;
              (child as HTMLElementWithStyle).style.transitionDelay = `${delay}s`;
            });
          }
        } else if (!entry.isIntersecting && entry.target.classList.contains("in-view")) {
          if (window.innerWidth >= 768) {
            entry.target.classList.remove("in-view");
          }
        }
      });
    }, observerOptions);
    
    const animatables = [
      ...document.querySelectorAll(".offscreen"),
      ...document.querySelectorAll(".animate-on-scroll"),
      document.getElementById("home-section"),
    document.getElementById("skills"),
      document.getElementById("contact-section"),
    document.getElementById("projects")
    ].filter(el => el !== null);
    
    const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    const hasDeviceMemory = 'deviceMemory' in navigator;
    const isMobileWithLowMemory = window.innerWidth < 768 && hasDeviceMemory && (navigator as any).deviceMemory < 4;
    
    if (!prefersReducedMotion && !isMobileWithLowMemory) {
      animatables.forEach(element => {
        animationObserver.observe(element);
      });
    } else {
      animatables.forEach(element => {
        element.classList.add("in-view");
      });
    }
  });
</script>
<script>
  // TypeScript-Deklaration für performance monitor
  interface PerformanceMonitor {
    start: () => void;
    togglePerformanceMode: () => boolean;
    addListener: (callback: (isLowMode: boolean) => void) => void;
  }

  document.addEventListener("DOMContentLoaded", () => {
    import('../utils/performanceMonitor.js').then(({ performanceMonitor }: { performanceMonitor: PerformanceMonitor }) => {
      performanceMonitor.start();
      
      const performanceToggle = document.getElementById('performanceToggle');

      if (performanceToggle) { 
        function updatePerformanceIcon(isLowMode: boolean): void {
          if (!performanceToggle) return;
          
          performanceToggle.innerHTML = ''; 
          const icon = document.createElement('i'); 
          
          if (isLowMode) {
            icon.className = 'fa-solid fa-gauge';
            icon.setAttribute('title', 'High Performance Modus aktivieren');
          } else {
            icon.className = 'fa-solid fa-gauge-high';
            icon.setAttribute('title', 'Low Performance Modus aktivieren');
          }
          performanceToggle.appendChild(icon); 
        }
        
        // localStorage kann null zurückgeben
        const savedMode = localStorage.getItem('performance-mode');
        updatePerformanceIcon(savedMode === 'low');
        
        performanceToggle.addEventListener('click', () => {
          const isLowMode = performanceMonitor.togglePerformanceMode();
          updatePerformanceIcon(isLowMode); 
        });
        
        performanceMonitor.addListener(updatePerformanceIcon);
      }
    }).catch(err => {
      console.error('Fehler beim Laden des Performance-Monitors:', err);
    });
  });
</script>
